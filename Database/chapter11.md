# 보안과 권한 관리
## 1. 데이터베이스 보안
조직에서 허가한 사용자만 데이터베이스에 접근할 수 있도록 통제하여 보안을 유지한다. 데이터베이스 관리 시스템은 보안 유지를 위해 계정이 발급된 사용자가 로그인에 성공했을 경우에만 데이터베이스에 접근이 가능하도록 하는 접근 제어 기능을 기본으로 제공한다.

## 2. 데이터베이스 보안 유형
- 물리적 환경에 대한 보안: 물리적 손실을 발생시키는 위험으로부터 데이터베이스를 보호한다.
- 권한 관리를 통한 보안: 접근이 허락된 사용자만 권한 내에서 데이터베이스를 사용하도록 보호한다.
- 운영 관리를 통한 보안: 무결성 제약조건을 정의하고 이 제약조건을 위반하지 않도록 통제한다.

## 3. 권한 부여와 취소
데이터베이스 객체는 소유자가 모든 권한을 가지고 있고, 소유자가 사용 권한을 부여하거나 취소할 수 있다.
### GRANT 문: 다른 사용자에게 객체에 대한 사용 권한 부여
기본 형식은 다음과 같다.
```sql
GRANT 권한 ON 객체 TO 사용자 [WITH GRANT OPTION];
```
테이블과 관련하여 다른 사용자에게 부여할 수 있는 주요 권한으로는 INSERT, DELETE, UPDATE, SELECT, REFERENCES가 있으며 여러 권한을 한 번에 동시에 부여할 수도 있다.

REFERENCES는 외래키 제약조건을 정의할 수 있는 권한이다. 이 권한을 부여받은 사용자는 권한 부여 대상인 테이블의 기본키를 참조하는 외래키를 자신이 생성하는 테이블에 포함할 수 있다.

UPDATE와 SELECT는 테이블을 구성하는 속성들 중 일부 속성만 수정 또는 검색하는 권한을 부여 할 수 있는데, ( ) 안에 해당 속성의 이름을 나열하면 된다.

📌 참고    
보안을 강화하기 위해 뷰를 이용할 수도 있다. 뷰를 이용하면 사용자가 테이블에 직접 접근하지 못하게 하면서 사용자에게 필요한 테이블 일부만 제공할 수 있다. 따라서 사용자와 관련없는 테이블의 다른 부분을 숨겨 보안을 유지하는 데 도움이 된다. 테이블에서 사용자가 업무를 수행하는 데 필요한 테이블의 일부분을 뷰로 생성한 뒤 사용자에게 이 뷰에 대한 권한을 부여하는 것도 보안을 유지하는 데 도움이 될 수 있다.


### REVOKE 문: 다른 사용자에게 부여된 객체에 대한 권한 취소
기본 형식은 다음과 같다.
```sql
REVOKE 권한 ON 객체 TO 사용자 CASCADE | RESTRICT;
```
- CASCADE 옵션: 권한을 취소할 사용자 A가 사용자 B 뿐만 아니라 C가 부여받은 권한도 연쇄적으로 함께 취소하고자 할 때 지정
- RESTRICT 옵션: 권한을 취소할 사용자 A가 사용자 C가 부여받은 권한은 취소하지 않도록 할 때 지정

## 4. 역할
권한 부여와 취소 등의 관리를 권한마다 따로 작성하여 부여하지 않고 편리하게 수행할 수 있도록 여러 권한을 그룹으로 묶어놓은 것이다.
- CREATE ROLE 문: 데이터베이스 관리자가 새로운 역할 생성
```sql
CREATE ROLE 롤이름;
```

- GRANT 문: 객체의 소유자가 역할에 객체에 대한 권한 추가
```sql
GRANT 권한 ON 객체 TO 롤이름;
```

## 5. 역할의 부여와 취소
데이터베이스 관리자가 역할을 부여하거나 취소한다.
- GRANT 문: 다른 사용자에게 역할 부여
```sql
GRANT 롤이름 TO 사용자;
```

- REVOKE 문: 사용자에게 부여된 역할 취소
```sql
REVOKE 롤이름 FROM 사용자;

DROP ROLE 롤이름;
```