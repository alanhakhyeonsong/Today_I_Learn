# ì„¸ì…˜ ì œì–´ í•„í„°

## SessionManagementFilter

1. ì„¸ì…˜ ê´€ë¦¬: ì¸ì¦ ì‹œ ì‚¬ìš©ìì˜ ì„¸ì…˜ì •ë³´ë¥¼ ë“±ë¡, ì¡°íšŒ, ì‚­ì œ ë“±ì˜ ì„¸ì…˜ ì´ë ¥ì„ ê´€ë¦¬
2. ë™ì‹œì  ì„¸ì…˜ ì œì–´: ë™ì¼ ê³„ì •ìœ¼ë¡œ ì ‘ì†ì´ í—ˆìš©ë˜ëŠ” ìµœëŒ€ ì„¸ì…˜ìˆ˜ë¥¼ ì œí•œ
3. ì„¸ì…˜ ê³ ì • ë³´í˜¸: ì¸ì¦ í•  ë•Œë§ˆë‹¤ ì„¸ì…˜ ì¿ í‚¤ë¥¼ ìƒˆë¡œ ë°œê¸‰í•˜ì—¬ ê³µê²©ìì˜ ì¿ í‚¤ ì¡°ì‘ì„ ë°©ì§€
4. ì„¸ì…˜ ìƒì„± ì •ì±…: `Always`, `if_required`, `Never`, `Stateless`

## ConcurrentSessionFilter

- ë§¤ ìš”ì²­ ë§ˆë‹¤ í˜„ì¬ ì‚¬ìš©ìì˜ ì„¸ì…˜ ë§Œë£Œ ì—¬ë¶€ ì²´í¬
- ì„¸ì…˜ì´ ë§Œë£Œë˜ì—ˆì„ ê²½ìš° ì¦‰ì‹œ ë§Œë£Œ ì²˜ë¦¬
- `session.isExpired() == true`
  - ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬
  - ì¦‰ì‹œ ì˜¤ë¥˜ í˜ì´ì§€ ì‘ë‹µ(This session has been expired)

## SessionManagementFilter, ConcurrentSessionFilter íë¦„ë„

![](https://images.velog.io/images/songs4805/post/fec1d0c5-cf4f-4b28-8a7d-fdefb122d320/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202022-03-07%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%209.55.16.png)

1. Login ì‹œë„
2. ìµœëŒ€ ì„¸ì…˜ í—ˆìš© ê°œìˆ˜ í™•ì¸: ìµœëŒ€ ì„¸ì…˜ í—ˆìš© ê°œìˆ˜ê°€ ì´ˆê³¼ë˜ì—ˆì„ ê²½ìš° ì •ì±…ë³„ ë¡œì§ ìˆ˜í–‰(ì´ì „ ì‚¬ìš©ì ì„¸ì…˜ ë§Œë£Œ/í˜„ì¬ ì‚¬ìš©ì ì¸ì¦ ì‹¤íŒ¨) - `session.expireNow()`
3. ì´ì „ ì‚¬ìš©ìê°€ ìì› ì ‘ê·¼(Request) ì‹œë„
4. `ConcurrentSessionFilter`ì—ì„œ ì´ì „ ì‚¬ìš©ìì˜ ì„¸ì…˜ì´ ë§Œë£Œë˜ì—ˆëŠ”ì§€ í™•ì¸: `SessionManagementFilter` ì•ˆì˜ ì„¤ì • ì°¸ì¡°
5. ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬ í›„ ì˜¤ë¥˜ í˜ì´ì§€ ì‘ë‹µ: This session has been expired

## Sequence Diagram

![](https://images.velog.io/images/songs4805/post/276e42e0-81e8-492a-80a5-fd0db687a153/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202022-03-07%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%2010.05.15.png)

# ì¸ê°€ API - ê¶Œí•œ ì„¤ì • ë° í‘œí˜„ì‹

## ì„ ì–¸ì  ë°©ì‹

- **URL**: `http.antMatchers("/users/**").hasRole("USER")`
- **Method**
  - `@PreAuthorize("hasRole('USER')")`
  - `public void user() {System.out.println("user")}`

## ë™ì  ë°©ì‹ - DB ì—°ë™ í”„ë¡œê·¸ë˜ë°

- URL
- Method

## ê¶Œí•œ ì„¤ì •

```java
@Override
protected void configure(HttpSecurity http) throws Exception {
    http
        .antMatcher("/shop/**") // íŠ¹ì • ê²½ë¡œë¥¼ ì§€ì • í•´ë‹¹ ë©”ì„œë“œë¥¼ ìƒëµí•˜ë©´ ëª¨ë“  ê²½ë¡œì— ëŒ€í•´ ê²€ìƒ‰í•¨
        .authorizeRequests() // ë³´ì•ˆ ê²€ì‚¬ ê¸°ëŠ¥ ì‹œì‘
          .antMatchers("/shop/login", "/shop/users/**").permitAll() // í•´ë‹¹ ê²½ë¡œì— ëª¨ë“  ì ‘ê·¼ì„ í—ˆìš©
          .antMatchers("/shop/mypage").hasRole("USER") // USER ê¶Œí•œì„ ê°€ì§€ê³  ìˆëŠ” ì‚¬ìš©ìì—ê²Œë§Œ í—ˆìš©
          .antMatchers("/shop/admin/pay").access("hasRole('ADMIN')")
          .antMatchers("/shop/admin/**).access("hasRole('ADMIN') or hasRole('SYS ')")
          .anyRequest().authenticated();
}
```

> ğŸ“Œ **ì£¼ì˜ì‚¬í•­**
> ì„¤ì • ì‹œ êµ¬ì²´ì ì¸ ê²½ë¡œ(`"/shop/admin/pay"`)ê°€ ë¨¼ì € ì„¤ì •ë˜ê³  ê·¸ ë‹¤ìŒ ë” ë„“ì€ ë²”ìœ„ê°€ ì„¤ì •ë˜ì•¼ í•œë‹¤. ì´ëŠ” ë¶ˆí•„ìš”í•œ ê²€ì‚¬ë¥¼ ë§‰ê¸° ìœ„í•´ì„œë‹¤. ì˜ˆë¥¼ ë“¤ì–´, `.antMatchers("/shop/admin/**).access("hasRole('ADMIN') or hasRole('SYS ')")`ê°€ ë¨¼ì € ì„¤ì •ëœë‹¤ë©´, SYS ìœ ì €ëŠ” í•´ë‹¹ ê²€ì‚¬ë¥¼ í†µê³¼í•˜ê³  ê·¸ ì•„ë˜(ì¢ì€ ë²”ìœ„)ì—ì„œ ê±¸ë¦¬ê²Œ ëœë‹¤.

## ì¸ê°€ API - í‘œí˜„ì‹

| ë©”ì†Œë“œ                       | ë™ì‘                                                     |
| ---------------------------- | -------------------------------------------------------- |
| `authenticated()`            | ì¸ì¦ëœ ì‚¬ìš©ìì˜ ì ‘ê·¼ì„ í—ˆìš©                              |
| `fullyAuthenticated()`       | ì¸ì¦ëœ ì‚¬ìš©ìì˜ ì ‘ê·¼ì„ í—ˆìš©, rememberMe ì¸ì¦ ì œì™¸        |
| `permitAll()`                | ë¬´ì¡°ê±´ ì ‘ê·¼ì„ í—ˆìš©                                       |
| `denyAll()`                  | ë¬´ì¡°ê±´ ì ‘ê·¼ì„ í—ˆìš©í•˜ì§€ ì•ŠìŒ                              |
| `anonymous()`                | ìµëª…ì‚¬ìš©ìì˜ ì ‘ê·¼ì„ í—ˆìš©                                 |
| `rememberMe()`               | ê¸°ì–µí•˜ê¸°ë¥¼ í†µí•´ ì¸ì¦ëœ ì‚¬ìš©ìì˜ ì ‘ê·¼ì„ í—ˆìš©              |
| `access(String)`             | ì£¼ì–´ì§„ SpEL í‘œí˜„ì‹ì˜ í‰ê°€ ê²°ê³¼ê°€ trueì´ë©´ ì ‘ê·¼ì„ í—ˆìš©    |
| `hasRole(String)`            | ì‚¬ìš©ìê°€ ì£¼ì–´ì§„ ì—­í• ì´ ìˆë‹¤ë©´ ì ‘ê·¼ì„ í—ˆìš©                |
| `hasAuthority(String)`       | ì‚¬ìš©ìê°€ ì£¼ì–´ì§„ ê¶Œí•œì´ ìˆë‹¤ë©´ ì ‘ê·¼ì„ í—ˆìš©                |
| `hasAnyRole(String...)`      | ì‚¬ìš©ìê°€ ì£¼ì–´ì§„ ê¶Œí•œì´ ìˆë‹¤ë©´ ì ‘ê·¼ì„ í—ˆìš©                |
| `hasAnyAuthority(String...)` | ì‚¬ìš©ìê°€ ì£¼ì–´ì§„ ê¶Œí•œ ì¤‘ ì–´ë–¤ ê²ƒì´ë¼ë„ ìˆë‹¤ë©´ ì ‘ê·¼ì„ í—ˆìš© |
| `hasIpAddress(String)`       | ì£¼ì–´ì§„ IPë¡œë¶€í„° ìš”ì²­ì´ ì™”ë‹¤ë©´ ì ‘ê·¼ í—ˆìš©                  |

## ì˜ˆì œ ì½”ë“œ

```java
@Slf4j
@Configuration
@EnableWebSecurity
@RequiredArgsConstructor
public class SecurityConfig extends WebSecurityConfigurerAdapter {

    private final UserDetailsService userDetailsService;

    // ë©”ëª¨ë¦¬ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©ì ìƒì„± ë° ë¹„ë°€ë²ˆí˜¸ì™€ ê¶Œí•œ ì„¤ì •(ì‹¤ì œë¡œëŠ” ì´ë ‡ê²Œ í•˜ë©´ ì•ˆë¨)
    @Override
    protected void configure(AuthenticationManagerBuilder auth) throws Exception {
        auth.inMemoryAuthentication().withUser("user").password("{noop}1111").roles("USER");
        auth.inMemoryAuthentication().withUser("sys").password("{noop}1111").roles("SYS");
        auth.inMemoryAuthentication().withUser("admin").password("{noop}1111").roles("ADMIN");
    }

    @Override
    protected void configure(HttpSecurity http) throws Exception {
        http
            .authorizeRequests()
            .antMatchers().hasRole("USER")
            .antMatchers("/shop/admin/pay").access("hasRole('ADMIN')")
            .antMatchers("/shop/admin/**).access("hasRole('ADMIN') or hasRole('SYS ')")
            .anyRequest().authenticated();
        http
            .formLogin();
    }
}
```

```java
@RestController
public class SecurityController {

    @GetMapping("/")
    public String index() {
        return "home";
    }

    @GetMapping("/loginPage")
    public String loginPage() {
        return "loginPage";
    }

    @GetMapping("/user")
    public String user() {
        return "user";
    }

    @GetMapping("/admin/pay")
    public String adminPay() {
        return "adminPay";
    }

    @GetMapping("/admin/**")
    public String adminAll() {
        return "admin";
    }
}
```

# ì˜ˆì™¸ ì²˜ë¦¬ ë° ìš”ì²­ ìºì‹œ í•„í„°

## ExceptionTranslationFilter, RequestCacheAwareFilter

Spring Securityê°€ ê´€ë¦¬í•˜ëŠ” ë³´ì•ˆ í•„í„° ì¤‘ ë§ˆì§€ë§‰ í•„í„°ê°€ `FilterSecurityInterceptor`ì´ê³ , ë°”ë¡œ ì „ í•„í„°ê°€ `ExceptionTranslationFilter`ì´ë‹¤. í•´ë‹¹ í•„í„°ì—ì„œ ì‚¬ìš©ìì˜ ìš”ì²­ì„ ë°›ì„ ë•Œ, ê·¸ ë‹¤ìŒ í•„í„°ë¡œ í•´ë‹¹ ìš”ì²­ì„ ì „ë‹¬í•  ë•Œ `try-catch`ë¡œ ê°ì‹¸ì„œ `FilterSecurityInterceptor`ë¥¼ í˜¸ì¶œí•˜ê³  ìˆê³ , í•´ë‹¹ í•„í„°ì—ì„œ ìƒê¸°ëŠ” ì¸ì¦ ë° ì¸ê°€ ì˜ˆì™¸ëŠ” `ExceptionTranslationFilter`ë¡œ `throw` í•˜ê³  ìˆë‹¤.

## AuthenticationException

- **ì¸ì¦ ì˜ˆì™¸ ì²˜ë¦¬**
  1. **`AuthenticationEntryPoint` í˜¸ì¶œ**
     â†’ ë¡œê·¸ì¸ í˜ì´ì§€ ì´ë™, 401 ì˜¤ë¥˜ ì½”ë“œ ì „ë‹¬ ë“±
  2. **ì¸ì¦ ì˜ˆì™¸ê°€ ë°œìƒí•˜ê¸° ì „ì˜ ìš”ì²­ ì •ë³´ë¥¼ ì €ì¥**
     â†’ `RequestCache`: ì‚¬ìš©ìì˜ ì´ì „ ìš”ì²­ ì •ë³´ë¥¼ ì„¸ì…˜ì— ì €ì¥í•˜ê³  ì´ë¥¼ êº¼ë‚´ì˜¤ëŠ” ìºì‹œ ë§¤ì»¤ë‹ˆì¦˜
     â†’ `SavedRequest`: ì‚¬ìš©ìê°€ ìš”ì²­í–ˆë˜ request íŒŒë¼ë¯¸í„° ê°’ë“¤, ê·¸ ë‹¹ì‹œì˜ í—¤ë”ê°’ë“¤ ë“±ì´ ì €ì¥

## AccessDeniedException

- **ì¸ê°€ ì˜ˆì™¸ ì²˜ë¦¬**
  - `AccessDeniedHandler`ì—ì„œ ì˜ˆì™¸ ì²˜ë¦¬í•˜ë„ë¡ ì œê³µ

## íë¦„ë„

![](https://images.velog.io/images/songs4805/post/a7551dc1-d513-4bdc-ad7f-4efc7cc7cd69/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202022-03-07%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%2011.23.24.png)

1. ìµëª… ì‚¬ìš©ìê°€ /user ì— ì ‘ê·¼ì„ ì‹œë„í•œë‹¤ê³  ê°€ì •
2. `FilterSecurityInterceptor` ê¶Œí•œ í•„í„°ê°€ í•´ë‹¹ ìš”ì²­(/user)ì„ ë°›ì•˜ì§€ë§Œ, í•´ë‹¹ ìœ ì €ëŠ” ì¸ì¦ì„ ë°›ì§€ ì•Šì€ ìƒíƒœ
3. í•´ë‹¹ í•„í„°ëŠ” ì¸ì¦ ì˜ˆì™¸ë¥¼ ë°œìƒ. â†’ ì •í™•íˆëŠ” **ì¸ê°€ ì˜ˆì™¸**ë¥¼ ë˜ì§„ë‹¤. í•´ë‹¹ ì‚¬ìš©ìëŠ” **ìµëª… ì‚¬ìš©ìì´ê¸°ì—** ì¸ì¦ì„ ë°›ì§€ ì•Šì€ ìƒíƒœë¼ì„œ **ì¸ê°€ ì˜ˆì™¸(`AccessDeniedException`)**ë¡œ ë¹ ì§„ë‹¤.
4. ì¸ê°€ ì˜ˆì™¸(`AccessDeniedException`)ëŠ” ìµëª… ì‚¬ìš©ìì´ê±°ë‚˜ RememberMe ì‚¬ìš©ìì¼ ê²½ìš° `AccessDeniedHandler`ë¥¼ í˜¸ì¶œí•˜ì§€ ì•Šê³  `AuthenticationException`ì—ì„œ ì²˜ë¦¬í•˜ëŠ” ë¡œì§ìœ¼ë¡œ ë³´ë‚´ê²Œ ëœë‹¤.
5. **ì¸ì¦ ì˜ˆì™¸(`AuthenticationException`)** ëŠ” ë‘ ê°€ì§€ ì¼ì„ í•œë‹¤.
   â†’ `AuthenticationEntryPoint` êµ¬í˜„ì²´ ì•ˆì—ì„œ login í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ í•œë‹¤.(ì¸ì¦ ì‹¤íŒ¨ ì´í›„) Security Contextë¥¼ nullë¡œ ì´ˆê¸°í™” í•´ì£¼ëŠ” ì‘ì—…ë„ í•´ì¤€ë‹¤.
   â†’ ì˜ˆì™¸ ë°œìƒ ì´ì „ì— ìœ ì €ê°€ ê°€ê³ ì í–ˆë˜ ìš”ì²­ì •ë³´ë¥¼ `DefaultSavedRequest` ê°ì²´ì— ì €ì¥í•˜ê³  í•´ë‹¹ ê°ì²´ëŠ” `Session`ì— ì €ì¥ë˜ë©° `Session`ì— ì €ì¥í•˜ëŠ” ì—­í• ì„ `HttpSessionRequestCache`ì—ì„œ í•´ì¤€ë‹¤.

---

1. ì¸ì¦ ì ˆì°¨ë¥¼ ë°Ÿì€ ì¼ë°˜ ìœ ì €ê°€ /user ìì›ì— ì ‘ê·¼ì„ ì‹œë„í•˜ëŠ”ë° í•´ë‹¹ ìì›ì— ì„¤ì •ëœ í—ˆê°€ ê¶Œí•œì´ ADMINì¼ ê²½ìš°
2. ê¶Œí•œì´ ì—†ê¸° ë•Œë¬¸ì— ì¸ê°€ ì˜ˆì™¸ ë°œìƒ
3. `AccessDeniedException`ì´ ë°œìƒ
4. `AccessDeniedHandler`ë¥¼ í˜¸ì¶œí•´ì„œ í›„ì† ì‘ì—…ì„ ì²˜ë¦¬ (ì¼ë°˜ì ìœ¼ë¡œ denied í˜ì´ì§€ë¡œ ì´ë™)

## API

```java
protected void configure(HttpSecurity http) throws Exception {
    //...(ì¤‘ëµ-ìœ„ ì˜ˆì œì½”ë“œì™€ ë™ì¼)
    http.formLogin()
        .successHandler({
            @Override
            public void onAuthenticationSuccess(HttpServletRequest request,
                                                HttpServletResponse response,
                                                Authentication authentication)
                                        throws IOException, ServletException {
                RequestCache requestCache = new HttpSessionRequestCache();
                SavedRequest savedRequest = requestCache.getRequest(request, response);
                String redirectUrl = savedRequest.getRedirectUrl();
                response.sendRedirect(redirectUrl);

            }
        });

    http.exceptionHandling() // ì˜ˆì™¸ ì²˜ë¦¬ ê¸°ëŠ¥ì´ ì‘ë™í•¨
         .authenticationEntryPoint(new AuthenticationEntryPoint() {
             @Override
             public void commence(HttpServletRequest request,
                                  HttpServletResponse response,
                                  AuthenticationException authException)
                          throws IOException, ServletException {
                 response.sendRedirect("/login");
             }
         }) // ì¸ì¦ ì‹¤íŒ¨ ì‹œ ì²˜ë¦¬
         .accessDeniedHandler(new AccessDeniedHandler() {
             @Override
             public void handle(HttpServletRequest request,
                                  HttpServletResponse response,
                                  AccessDeniedException accessDeniedEception)
                          throws IOException, ServletException {
                 response.sendRedirect("/denied");
             }
         }); // ì¸ì¦ ì‹¤íŒ¨ ì‹œ ì²˜ë¦¬
}
```

- `onAuthenticationSuccess`: `SavedRequest` ê°ì²´ì— `RequestCache` ê°ì²´ê°€ ë‹´ê³  ìˆëŠ” ì‚¬ìš©ìê°€ ì›ë˜ ê°€ë ¤ë˜(ìš”ì²­í•˜ë ¤ë˜) ìì›ì˜ ìš”ì²­ì •ë³´ë¥¼ ê°€ì ¸ì™€ í™œìš©í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.
- `AuthenticationEntryPoint`: ì¸ì¦ ì˜ˆì™¸ ë°œìƒì‹œ ìˆ˜í–‰ ë©”ì†Œë“œ(`commence()`) ì˜¤ë²„ë¼ì´ë”©. í•´ë‹¹ ì½”ë“œì—ì„œëŠ” login í˜ì´ì§€ë¡œ ì´ë™ì‹œí‚¤ì§€ë§Œ ë‹¤ë¥¸ ë¡œì§ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŒ.
- `AccessDeniedHandler`: ì¸ê°€ ì˜ˆì™¸ ë°œìƒì‹œ ì²˜ë¦¬ ë¡œì§ ìˆ˜í–‰. í•´ë‹¹ ì½”ë“œì—ì„œëŠ” denied í˜ì´ì§€ë¡œ ì´ë™ì‹œí‚¤ì§€ë§Œ ë³„ë„ë¡œ ë‹¤ë¥¸ ë¡œì§ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŒ.

## Sequence Diagram

![](https://images.velog.io/images/songs4805/post/b7cb762c-ff97-40c4-af8e-978bb7f25783/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202022-03-07%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%2011.37.20.png)

# CSRF(ì‚¬ì´íŠ¸ ê°„ ìš”ì²­ ìœ„ì¡°)

![](https://images.velog.io/images/songs4805/post/56a154df-d53e-4ee5-911f-5cac04cd9582/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202022-03-08%20%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB%209.41.01.png)

ì‚¬ìš©ìê°€ ì‚¬ì´íŠ¸ì— ì ‘ì†í•˜ì—¬ ë¡œê·¸ì¸ í›„ ì¿ í‚¤ë¥¼ ë°œê¸‰ë°›ì€ ë’¤ ê³µê²©ìê°€ ì‚¬ìš©ìì˜ ì´ë©”ì¼ë¡œ íŠ¹ì • ë§í¬ë¥¼ ì „ë‹¬í•˜ê³  ì‚¬ìš©ìê°€ í•´ë‹¹ ë§í¬ë¥¼ í´ë¦­í•˜ê²Œ ë˜ë©´, ê³µê²©ìš© ì›¹í˜ì´ì§€ì— ì ‘ì†í•˜ê²Œ ë˜ê³ , í•´ë‹¹ í˜ì´ì§€ì— 'ë¡œë˜ ë‹¹ì²¨'ì´ë¼ëŠ” ì´ë¯¸ì§€ê°€ ë…¸ì¶œëœë‹¤. ìœ ì €ê°€ ì´ ì´ë¯¸ì§€ë¥¼ í´ë¦­í•˜ë©´ ì‚¬ì´íŠ¸ì— íŠ¹ì • URLë¡œ ìš”ì²­í•˜ê²Œ ë˜ëŠ”ë° í•´ë‹¹ ì¿ í‚¤ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆê¸° ë•Œë¬¸ì— í•´ë‹¹ ìš”ì²­ì— ëŒ€í•´ ì •ìƒì ìœ¼ë¡œ ë™ì‘ì„ í•˜ê²Œ ëœë‹¤.

**ì´ì²˜ëŸ¼ ì‚¬ìš©ìì˜ ì˜ë„ì™€ëŠ” ë¬´ê´€í•˜ê²Œ ê³µê²©ìê°€ ì‹¬ì–´ë†“ì€ íŠ¹ì • ë°©ì‹ì„ í†µí•´ ìì› ìš”ì²­ì„ í•˜ê²Œ ë˜ê³  ê·¸ê²ƒì„ ì‘ë‹µ ë°›ì„ ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê²ƒì„ CSRF(ì‚¬ì´íŠ¸ ê°„ ìš”ì²­ ìœ„ì¡°)ë¼ í•œë‹¤.**

## CsrfFilter

- ëª¨ë“  ìš”ì²­ì— ëœë¤í•˜ê²Œ ìƒì„±ëœ í† í°ì„ HTTP íŒŒë¼ë¯¸í„°ë¡œ ìš”êµ¬
- ìš”ì²­ ì‹œ ì „ë‹¬ë˜ëŠ” í† í° ê°’ê³¼ ì„œë²„ì— ì €ì¥ëœ ì‹¤ì œ ê°’ê³¼ ë¹„êµí•œ í›„ ì¼ì¹˜í•˜ì§€ ì•Šìœ¼ë©´ ìš”ì²­ì€ ì‹¤íŒ¨
- Client
  - HTTP ë©”ì†Œë“œ: PATCH, POST, PUT, DELETE

```html
<input type="hidden" name="${csrf.parameterName}" value="${_csrf.token}" />
```

- Spring Security
  - `http.csrf()`: ê¸°ë³¸ í™œì„±í™” ë˜ì–´ ìˆìŒ
  - `http.csrf().disabled()`: ë¹„í™œì„±í™”

# References

- [ì •ìˆ˜ì›ë‹˜ì˜ ìŠ¤í”„ë§ ì‹œíë¦¬í‹° - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Security](https://www.inflearn.com/course/%EC%BD%94%EC%96%B4-%EC%8A%A4%ED%94%84%EB%A7%81-%EC%8B%9C%ED%81%90%EB%A6%AC%ED%8B%B0#)
